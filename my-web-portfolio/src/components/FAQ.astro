---
import { Icon } from 'astro-icon/components';

interface Props {
    question?: string,
    answer?: string,
}
const {
    question="Are you open for freelance/contract work?", 
    answer="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Et tortor velit morbi integer sed orci, suspendisse quis. Turpis quis id eget feugiat."
} =  Astro.props as Props;
---

<article class="w-full faq-item bg-[rgb(var(--very-dark-blue-lightest))] px-6 py-5 rounded-xl transition-all duration-300 shadow-md hover:shadow-lg">
    <button class="w-full flex justify-between items-center text-left focus:outline-none">
        <h4 class="text-2xl font-semibold text-[rgb(var(--accent))]">{question}</h4>
        <Icon name="mdi:chevron-down" class="w-6 h-6 text-[rgb(var(--accent))] transition-transform duration-300" />
    </button>
    <div class="faq-answer overflow-hidden max-h-0 transition-all duration-300 ease-in-out">
        <p class="w-full text-xl text-gray-300 pt-4">{answer}</p>
    </div>
</article>

<script>
    document.querySelectorAll('.faq-item').forEach(item => {
        const button = item.querySelector('button') as HTMLButtonElement;
        const answer = item.querySelector('.faq-answer') as HTMLElement;
        const icon = button?.querySelector('.icon') as HTMLElement;

        button?.addEventListener('click', () => {
            const isOpen = answer.classList.contains('active');
            
            if (isOpen) {
                answer.classList.remove('active');
                answer.style.maxHeight = '';
                icon.classList.remove('rotate-180');
                item.classList.remove('active');
            } else {
                answer.classList.add('active');
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.classList.add('rotate-180');
                item.classList.add('active');
            }
        });
    });
</script>

<style>
    .faq-item.active {
        @apply bg-[rgb(var(--accent-lightest))] shadow-lg;
    }
    .faq-item.active button h4 {
        @apply text-[rgb(var(--accent-darkest))];
    }
    .faq-item.active .icon {
        @apply text-[rgb(var(--accent-darkest))];
    }
</style>