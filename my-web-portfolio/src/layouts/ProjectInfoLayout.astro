---
import Image from 'astro/components/Image.astro';
import type { ImageMetadata } from 'astro';
import Button from '../components/Button.astro';
import InfoSnippet from '../components/InfoSnippet.astro';
import Divider from '../components/Divider.astro';
import { Icon } from 'astro-icon/components';

interface Props {
    id?: number;
    title?: string;
    summary?: string;
    techStack?: string[];
    projectImgName?: string;
    projectImgAlt?: string;
    projectImgW?: number;
    projectImgH?: number;
    githubLink?: string;
    liveLink?: string;
    projectInfo?: string;
    featured?: boolean;
    projectsPage?: boolean;
}

const {
    id=0,
    title="Content Writing Website", 
    summary="Gorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eu turpis molestie, dictum est a, mattis tellus. Gorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eu turpis.",
    techStack=["react", "supabase", "tailwindcss"],
    projectImgName="/src/assets/projectImages/default.jpg",
    projectImgAlt="project",
    projectImgW=475,
    projectImgH=156,
    githubLink="https://github.com/Keanin-Cupido",
    liveLink="https://github.com/Keanin-Cupido",
    featured=true,
    projectsPage=true,
} = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projectImages/*.{jpeg,jpg,png,gif}');
const logos = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projectLogos/*.{jpeg,jpg,png,gif,svg}');

if (!images[projectImgName]) throw new Error(`"${projectImgName}" does not exist in glob: "/src/assets/projectImages/*.{jpeg,jpg,png,gif}"`);
if (!logos['/src/assets/projectLogos/logo.svg']) throw new Error(`"${projectImgName}" does not exist in glob: "/src/assets/projectLogos/*.{jpeg,jpg,png,gif,svg}"`);

---

<main class="main" transition:animate="slide">
    <header class="header">
        <!-- Top -->
        <div class="top">
            <div class="logo">
                <Image src={logos['/src/assets/projectLogos/logo.svg']()} alt={projectImgAlt} width={projectImgW} height={projectImgH} />
            </div>
            <Button 
                title='View Website'
                link={liveLink}
                primary={false}
                newTab={true}
            />
        </div>

        <!-- Middle -->
        <div class="middle w-[100%] sm:w-[80%]">
            <div class="tech">
                {
                    techStack.map(tech => (
                        <Icon name={`devicon:${tech}`} />
                    ))
                }
            </div>
            <h2>{title}</h2>
            <p>{summary}</p>
        </div>

        <!-- Bottom -->
        <div class="bottom">
            <InfoSnippet title='Project Type' info="Marketing" />
            <InfoSnippet title='Date' info="Jan 2021 - Feb 2021" />
            <InfoSnippet title='Services' info="Website Marketing Strategy" />
            <InfoSnippet title='Client' info="Business" />
        </div>
    </header>

    <Divider />

    <!-- Overview Section -->
    <section class="overview">
        <h3>Project Overview</h3>
        <p></p>
    </section>

    <!-- Execution Section -->
    <section class="execution">
        <h3>Project Execution</h3>
        <p></p>
    </section>

    <!-- Results Section -->
    <section class="results">
        <h3>Results</h3>
        <p></p>
    </section>

    <!-- Other Suggested (Similar) Projects -->
    <section class="other"></section>
</main>

<style>
    .main {
        width: 100%;
        max-width: 800px;
        margin: 5em auto;
        padding: 0em 2em;

        /* === Header === */
        .header {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            gap: 2em;
            & .top {
                width: 100%;
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
                & .logo {
                    width: 100%;
                    max-width: 96px;
                    & > img {
                        border-radius: 10px;
                    }
                }
            }
            & .middle {
                margin-top: 2em;
                /* width: 80%; */
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                justify-content: flex-start;
                gap: 1em;
                & .tech {
                    display: flex;
                    align-items: flex-start;
                    justify-content: flex-start;
                    gap: 1em;
                    font-size: 2rem;
                }
                & > h2 {
                    font-size: 2rem;
                    font-weight: 600;
                }
                & > p {
                    font-size: 1rem;
                    font-weight: 300;
                    opacity: 0.6;
                }
            }
            & .bottom {
                width: 100%;
                display: flex;
                flex-direction: row;
                align-items: flex-start;
                justify-content: space-between;
            }
        }

        /* === Overview === */
        .overview {

        }
    }
</style>
