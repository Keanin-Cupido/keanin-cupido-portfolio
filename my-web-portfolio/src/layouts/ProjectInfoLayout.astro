---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import Button from '../components/Button.astro';
import InfoSnippet from '../components/InfoSnippet.astro';
import Divider from '../components/Divider.astro';
import { Icon } from 'astro-icon/components';

interface Props {
    id?: number;
    title: string;
    summary: string;
    techStack: string[];
    projectImgName: string;
    projectImgAlt: string;
    projectImgW: number;
    projectImgH: number;
    githubLink: string;
    liveLink: string;
    projectInfo?: string;
    featured?: boolean;
    projectsPage?: boolean;
}

const {
    id = 0,
    title,
    summary,
    techStack,
    projectImgName,
    projectImgAlt,
    projectImgW,
    projectImgH,
    githubLink,
    liveLink,
    featured = false,
    projectsPage = false,
} = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projectImages/*.{jpeg,jpg,png,gif}');
const logos = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projectLogos/*.{jpeg,jpg,png,gif,svg}');

const projectImage = images[projectImgName];
const logoImage = logos['/src/assets/projectLogos/logo.svg'];

if (!projectImage) throw new Error(`"${projectImgName}" does not exist in project images`);
if (!logoImage) throw new Error(`Logo image does not exist in project logos`);

const projectInfoSections = [
    { title: 'Project Overview', content: '' },
    { title: 'Project Execution', content: '' },
    { title: 'Results', content: '' },
];
---

<main class="w-full max-w-3xl mx-auto my-20 px-8" transition:animate="fade">
    <header class="flex flex-col gap-8">
        <div class="flex justify-between items-center">
            <div class="max-w-24">
                <Image src={logoImage()} alt="Logo" width={64} height={64} loading="eager" class="rounded-lg" />
            </div>
            <Button 
                title='View Website'
                link={liveLink}
                variant="primary"
                newTab={true}
            />
        </div>

        <div class="mt-8 flex flex-col gap-4">
            <div class="flex gap-4 text-4xl">
                {techStack.map(tech => <Icon name={`devicon:${tech}`} />)}
            </div>
            <h2 class="text-4xl font-semibold">{title}</h2>
            <p class="text-base font-light opacity-60">{summary}</p>
        </div>

        <div class="flex flex-col sm:flex-row justify-between gap-4 sm:gap-8">
            <InfoSnippet title='Project Type' info="Marketing" />
            <InfoSnippet title='Date' info="Jan 2021 - Feb 2021" />
            <InfoSnippet title='Services' info="Website Marketing Strategy" />
            <InfoSnippet title='Client' info="Business" />
        </div>
    </header>

    <Divider />

    {projectInfoSections.map(({ title, content }) => (
        <section class="mt-8">
            <h3 class="text-2xl font-semibold">{title}</h3>
            <p>{content}</p>
        </section>
    ))}

    <section class="other"></section>
</main>